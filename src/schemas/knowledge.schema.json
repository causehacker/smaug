{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Knowledge Entry",
  "description": "Schema for knowledge entries created by Smaug bookmark processing",
  "type": "object",
  "required": ["slug", "category", "filePath", "frontmatter", "content"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Optional unique identifier"
    },
    "slug": {
      "type": "string",
      "description": "Filename slug (e.g., 'smaug-twitter-bookmark-archiver')",
      "minLength": 1
    },
    "category": {
      "type": "string",
      "enum": ["tools", "articles", "podcasts", "videos"],
      "description": "Category folder name"
    },
    "filePath": {
      "type": "string",
      "description": "Relative path to markdown file",
      "pattern": "^knowledge/(tools|articles|podcasts|videos)/[^/]+\\.md$"
    },
    "frontmatter": {
      "type": "object",
      "required": ["title", "type", "date_added", "source", "tags", "via"],
      "properties": {
        "title": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "type": "string",
          "enum": ["tool", "article", "podcast", "video"]
        },
        "date_added": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "description": "ISO date format: YYYY-MM-DD"
        },
        "source": {
          "type": "string",
          "format": "uri"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "via": {
          "type": "string",
          "description": "Attribution string, e.g., 'Twitter bookmark from @username'"
        },
        "author": {
          "type": "string",
          "description": "Article author (for articles)"
        },
        "show": {
          "type": "string",
          "description": "Podcast show name (for podcasts)"
        },
        "channel": {
          "type": "string",
          "description": "Channel/creator name (for videos)"
        },
        "status": {
          "type": "string",
          "enum": ["needs_transcript"],
          "description": "Transcript status (for podcasts/videos)"
        }
      }
    },
    "content": {
      "type": "object",
      "required": ["description", "links"],
      "properties": {
        "description": {
          "type": "string",
          "minLength": 1,
          "description": "Main description paragraph"
        },
        "keyFeatures": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Key features list (for tools)"
        },
        "keyTakeaways": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Key takeaways list (for articles)"
        },
        "context": {
          "type": "string",
          "description": "Optional context section"
        },
        "episodeInfo": {
          "type": "object",
          "properties": {
            "show": {
              "type": "string"
            },
            "episode": {
              "type": "string"
            },
            "whyBookmarked": {
              "type": "string"
            }
          },
          "required": ["show", "episode", "whyBookmarked"],
          "description": "Episode information (for podcasts)"
        },
        "videoInfo": {
          "type": "object",
          "properties": {
            "channel": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "whyBookmarked": {
              "type": "string"
            }
          },
          "required": ["channel", "title", "whyBookmarked"],
          "description": "Video information (for videos)"
        },
        "transcript": {
          "type": "string",
          "description": "Transcript content (for podcasts/videos)"
        },
        "links": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["label", "url"],
            "properties": {
              "label": {
                "type": "string",
                "description": "Link label, e.g., 'GitHub', 'Article', 'Original Tweet'"
              },
              "url": {
                "type": "string",
                "format": "uri"
              }
            }
          },
          "minItems": 1
        }
      }
    },
    "sourceBookmark": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "author": {
          "type": "string"
        },
        "tweetUrl": {
          "type": "string",
          "format": "uri"
        },
        "createdAt": {
          "type": "string"
        }
      },
      "required": ["id", "author", "tweetUrl", "createdAt"]
    }
  }
}
